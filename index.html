<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Học máy & AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .gradient-text {
            background-image: linear-gradient(45deg, #6a0dad, #ff007f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
        }
        .tab-button.active {
            border-bottom: 2px solid #6a0dad;
            color: #6a0dad;
            font-weight: 600;
        }
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        html {
            scroll-behavior: smooth;
        }
        .doc-section {
            display: none;
        }
        .doc-section.active {
            display: block;
        }
        .dropdown:hover .dropdown-menu {
            display: block;
        }
    </style>
</head>
<body class="p-4 sm:p-8">
    <div id="loading-spinner" class="hidden fixed inset-0 bg-gray-50 bg-opacity-75 flex justify-center items-center z-50">
        <div class="animate-spin rounded-full h-12 w-12 border-b-4 border-gray-900"></div>
    </div>
    <div id="tts-loading-spinner" class="hidden fixed inset-0 bg-gray-50 bg-opacity-75 flex justify-center items-center z-50">
        <div class="animate-spin rounded-full h-12 w-12 border-b-4 border-gray-900"></div>
    </div>

    <div class="max-w-7xl mx-auto bg-white rounded-xl shadow-lg p-6 sm:p-10 space-y-8">
        <header class="text-center relative">
            <!-- Navigation Menu -->
            <nav class="flex justify-center flex-wrap gap-4 mt-6 mb-8 text-sm sm:text-base">
                <a href="#intro-section" class="px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors duration-200 nav-link" data-i18n="navHome">TRANG CHỦ</a>
                <a href="#latest-news-section" class="px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors duration-200 nav-link" data-i18n="navNews">TIN TỨC</a>
                <div class="relative dropdown">
                    <button class="px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors duration-200 nav-link" data-i18n="navML">MÔ HÌNH HỌC MÁY ▼</button>
                    <div class="dropdown-menu hidden absolute left-1/2 -translate-x-1/2 mt-2 w-48 bg-white rounded-md shadow-xl z-10">
                        <a href="#ann-doc" class="block px-4 py-2 text-gray-800 hover:bg-gray-100 rounded-t-md doc-link" data-doc-target="ann-doc">ANN</a>
                        <a href="#lstm-doc" class="block px-4 py-2 text-gray-800 hover:bg-gray-100 doc-link" data-doc-target="lstm-doc">LSTM</a>
                        <a href="#rf-doc" class="block px-4 py-2 text-gray-800 hover:bg-gray-100 rounded-b-md doc-link" data-doc-target="rf-doc">RF</a>
                    </div>
                </div>
                <a href="#" class="px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors duration-200 nav-link" data-i18n="navAI">TRÍ TUỆ NHÂN TẠO</a>
                <a href="#documents-section" class="px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors duration-200 nav-link" data-i18n="navDocs">KHO TÀI LIỆU</a>
            </nav>
            <h1 class="text-3xl sm:text-5xl font-bold text-gray-800 mb-2" data-i18n="headerTitle">MÔ HÌNH HỌC MÁY & TRÍ TUỆ NHÂN TẠO</h1>
            <div class="absolute top-0 right-0">
                <div class="relative group">
                    <button class="p-2 rounded-md bg-gray-100 hover:bg-gray-200">
                        <span id="lang-display">VI</span>
                    </button>
                    <div class="absolute right-0 mt-2 w-24 bg-white rounded-md shadow-xl z-10 hidden group-hover:block">
                        <button class="w-full text-left p-3 rounded-md hover:bg-gray-100 lang-option" data-lang="vi">Tiếng Việt</button>
                        <button class="w-full text-left p-3 rounded-md hover:bg-gray-100 lang-option" data-lang="en">English</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content Sections -->
        <div id="main-content-container">
            <!-- Ô giới thiệu chung -->
            <main id="intro-section" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 doc-section active">
                <div class="col-span-1 md:col-span-2 lg:col-span-1 p-6 bg-blue-100 rounded-lg shadow-md border-2 border-blue-200">
                    <h2 class="text-2xl font-semibold mb-3 text-blue-800" data-i18n="introGeneralTitle">Giới thiệu chung</h2>
                    <p class="text-gray-700 leading-relaxed" data-i18n="introGeneralText">
                        Trí tuệ nhân tạo (AI) và Học máy (ML) là hai lĩnh vực liên quan chặt chẽ, cùng nhau tạo nên những công nghệ đột phá, cho phép máy tính học hỏi và đưa ra quyết định mà không cần được lập trình rõ ràng. Chúng đang thay đổi cách chúng ta tương tác với thế giới, từ các trợ lý ảo đến hệ thống chẩn đoán y tế.
                    </p>
                </div>
                <div class="p-6 bg-green-100 rounded-lg shadow-md border-2 border-green-200">
                    <h2 class="text-2xl font-semibold mb-3 text-green-800" data-i18n="introMLTitle">Mô hình Học máy</h2>
                    <p class="text-gray-700 leading-relaxed" data-i18n="introMLText">
                        Học máy (ML) là một nhánh của AI, tập trung vào việc phát triển các thuật toán cho phép máy tính tự học từ dữ liệu. Thay vì lập trình từng bước, chúng ta "huấn luyện" các mô hình bằng một lượng lớn dữ liệu để chúng tự tìm ra các mẫu và quy luật.
                    </p>
                </div>
                <div class="p-6 bg-purple-100 rounded-lg shadow-md border-2 border-purple-200">
                    <h2 class="text-2xl font-semibold mb-3 text-purple-800" data-i18n="introAITitle">Trí tuệ nhân tạo</h2>
                    <p class="text-gray-700 leading-relaxed" data-i18n="introAIText">
                        Trí tuệ nhân tạo (AI) là lĩnh vực rộng lớn hơn, nhằm mục đích tạo ra các hệ thống có khả năng mô phỏng trí thông minh của con người. Điều này bao gồm khả năng suy luận, giải quyết vấn đề, nhận thức, học hỏi và thậm chí là sáng tạo. AI là mục tiêu cuối cùng.
                    </p>
                </div>
                <div class="col-span-1 md:col-span-2 lg:col-span-1 p-6 bg-yellow-100 rounded-lg shadow-md border-2 border-yellow-200 flex flex-col items-center justify-center text-center">
                    <h2 class="text-2xl font-semibold mb-4 text-yellow-800" data-i18n="introRelationshipTitle">Mối liên quan</h2>
                    <p class="text-gray-700 leading-relaxed mb-4" data-i18n="introRelationshipText">
                        Học máy là một tập hợp con quan trọng của Trí tuệ nhân tạo. Nó là một trong những phương pháp chính để đạt được mục tiêu AI.
                    </p>
                    <div class="w-full flex justify-center">
                        <div class="relative w-64 h-48">
                            <div class="absolute inset-0 m-auto w-48 h-48 rounded-full bg-purple-300 flex items-center justify-center text-purple-900 font-bold text-lg border-4 border-purple-500">
                                AI
                                <span class="text-sm font-normal block mt-1" data-i18n="aiFull">Trí tuệ nhân tạo</span>
                            </div>
                            <div class="absolute inset-0 m-auto w-32 h-32 rounded-full bg-green-300 flex items-center justify-center text-green-900 font-bold text-base border-4 border-green-500">
                                ML
                                <span class="text-xs font-normal block mt-1" data-i18n="mlFull">Học máy</span>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
            
            <!-- Latest News -->
            <section id="latest-news-section" class="mt-8 doc-section active">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-700 mb-6" data-i18n="latestNewsTitle">Tin tức mới nhất</h2>
                <div class="flex flex-wrap border-b border-gray-200 mb-6">
                    <button id="news-tab-ml" class="tab-button py-2 px-4 text-sm md:text-base font-semibold transition-colors duration-200 active" data-i18n="mlModels">Mô hình học máy</button>
                    <button id="news-tab-ai" class="tab-button py-2 px-4 text-sm md:text-base font-semibold transition-colors duration-200" data-i18n="aiModels">Trí tuệ nhân tạo</button>
                </div>
                <div id="latest-news-content" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- News cards will be injected here -->
                </div>
                <div id="news-loading-spinner" class="flex justify-center items-center py-10 hidden">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"></div>
                </div>
            </section>

            <!-- Useful Documents -->
            <section id="documents-section" class="mt-8 doc-section">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-700 mb-6" data-i18n="documentsTitle">Tài liệu hữu ích</h2>
                <div class="flex flex-wrap border-b border-gray-200 mb-6">
                    <button id="documents-tab-ml" class="tab-button py-2 px-4 text-sm md:text-base font-semibold transition-colors duration-200 active" data-i18n="mlModels">Mô hình học máy</button>
                    <button id="documents-tab-ai" class="tab-button py-2 px-4 text-sm md:text-base font-semibold transition-colors duration-200" data-i18n="aiModels">Trí tuệ nhân tạo</button>
                </div>
                <div class="bg-white rounded-xl shadow-md p-6">
                    <div id="documents-loading-spinner" class="flex justify-center items-center py-10 hidden">
                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"></div>
                    </div>
                    <table id="documents-table" class="min-w-full bg-white rounded-lg overflow-hidden hidden">
                        <thead class="bg-gray-100 text-gray-700 uppercase text-sm">
                            <tr>
                                <th class="py-3 px-6 text-left" data-i18n="docName">Tên tài liệu</th>
                                <th class="py-3 px-6 text-left hidden sm:table-cell" data-i18n="docSummary">Tóm tắt</th>
                                <th class="py-3 px-6 text-left" data-i18n="docTopic">Chủ đề</th>
                                <th class="py-3 px-6 text-left" data-i18n="docSourceVI">Nguồn (VI)</th>
                                <th class="py-3 px-6 text-left" data-i18n="docSourceEN">Source (EN)</th>
                            </tr>
                        </thead>
                        <tbody id="documents-table-body" class="divide-y divide-gray-200">
                            <!-- Documents will be injected here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Image Generation -->
            <section id="image-generation-section" class="mt-8 doc-section">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-700 mb-6" data-i18n="imageGenTitle">Tạo hình ảnh với AI ✨</h2>
                <div class="bg-white rounded-xl shadow-md p-6">
                    <p class="mb-4 text-gray-600" data-i18n="imageGenDesc">Nhập mô tả bằng tiếng Anh về một khái niệm hoặc ý tưởng, và AI sẽ tạo ra một hình ảnh cho bạn. Ví dụ: "a futuristic robot helping people in a city park".</p>
                    <div class="flex flex-col md:flex-row items-stretch md:space-x-4 space-y-4 md:space-y-0">
                        <input type="text" id="image-prompt" placeholder="Mô tả hình ảnh bạn muốn tạo..." class="flex-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" data-i18n-placeholder="imagePromptPlaceholder">
                        <button id="generate-image-btn" class="bg-purple-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-purple-800 transition-colors duration-300" data-i18n="generateImageBtn">
                            Tạo hình ảnh ✨
                        </button>
                    </div>
                    <div id="image-output-container" class="mt-6 bg-gray-100 rounded-lg shadow-inner flex items-center justify-center text-gray-500 min-h-[300px]">
                        <span id="image-placeholder-text" data-i18n="imagePlaceholder">Hình ảnh được tạo sẽ xuất hiện tại đây.</span>
                        <img id="generated-image" src="" alt="Hình ảnh được tạo bởi AI" class="hidden max-w-full h-auto rounded-lg">
                    </div>
                </div>
            </section>
            
            <!-- ANN Document Page -->
            <section id="ann-doc" class="mt-8 doc-section">
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                    <aside class="lg:col-span-1 bg-gray-50 p-6 rounded-lg shadow-md border border-gray-200">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Mục lục</h3>
                        <nav class="space-y-2">
                            <a href="#ann-intro" class="block text-gray-700 hover:text-blue-600">1. Cơ chế hoạt động của một Nơ-ron đơn lẻ</a>
                            <a href="#ann-structure" class="block text-gray-700 hover:text-blue-600">2. Cấu trúc mạng nơ-ron</a>
                            <a href="#ann-layers" class="block text-gray-700 hover:text-blue-600 ml-4">2.1 Lớp đầu vào</a>
                            <a href="#ann-hidden-layers" class="block text-gray-700 hover:text-blue-600 ml-4">2.2 Lớp ẩn</a>
                            <a href="#ann-output-layer" class="block text-gray-700 hover:text-blue-600 ml-4">2.3 Lớp đầu ra</a>
                            <a href="#ann-how-it-works" class="block text-gray-700 hover:text-blue-600">3. Quy trình huấn luyện</a>
                            <a href="#ann-applications" class="block text-gray-700 hover:text-blue-600">4. Ứng dụng phổ biến</a>
                        </nav>
                    </aside>
                    <div class="lg:col-span-3 prose max-w-none text-gray-800">
                        <h1 class="text-3xl font-bold text-gray-800 mb-6">Mô hình Mạng nơ-ron nhân tạo (ANN)</h1>
                        <p>Mạng nơ-ron nhân tạo (Artificial Neural Network - ANN) là một mô hình máy tính được lấy cảm hứng từ cách hoạt động của bộ não con người, đặc biệt là hệ thống nơ-ron sinh học. Đây là một trong những mô hình nền tảng của học máy và học sâu, được sử dụng để giải quyết nhiều bài toán phức tạp từ nhận dạng hình ảnh đến xử lý ngôn ngữ tự nhiên.</p>
                        
                        <h2 id="ann-intro" class="text-2xl font-bold text-gray-700 mt-8 mb-4">1. Cơ chế hoạt động của một Nơ-ron đơn lẻ</h2>
                        <p>Một nơ-ron nhân tạo (node) là đơn vị cơ bản của ANN. Nó hoạt động tương tự một hàm toán học đơn giản. Mỗi nơ-ron nhận một hoặc nhiều đầu vào, mỗi đầu vào có một trọng số ($w_i$) đi kèm. Nơ-ron sẽ tính tổng có trọng số của tất cả các đầu vào, cộng thêm một độ lệch ($b$), và sau đó truyền kết quả này qua một hàm kích hoạt (activation function) để tạo ra đầu ra.
                        </p>
                        <p>Công thức toán học cho đầu ra của một nơ-ron có thể được biểu diễn như sau:</p>
                        <p class="text-center font-mono text-lg my-4 overflow-x-auto">
                            $y = f(\sum_{i=1}^{n} w_i x_i + b)$
                        </p>
                        <p>Trong đó:
                            <ul>
                                <li>$x_i$: Các giá trị đầu vào.</li>
                                <li>$w_i$: Các trọng số (weight), quyết định mức độ quan trọng của mỗi đầu vào.</li>
                                <li>$b$: Độ lệch (bias), giúp mô hình linh hoạt hơn.</li>
                                <li>$f$: Hàm kích hoạt, giới hạn đầu ra của nơ-ron trong một phạm vi nhất định. Các hàm phổ biến bao gồm Sigmoid, ReLU (Rectified Linear Unit), và Tanh.</li>
                            </ul>
                        </p>
                        

                        <h2 id="ann-structure" class="text-2xl font-bold text-gray-700 mt-8 mb-4">2. Cấu trúc mạng nơ-ron</h2>
                        <p>Một ANN được xây dựng từ các nơ-ron được kết nối với nhau thành các lớp. Một mạng cơ bản bao gồm ba loại lớp chính:</p>
                        <h3 id="ann-layers" class="text-xl font-bold text-gray-600 mt-4 mb-2">2.1 Lớp đầu vào (Input Layer)</h3>
                        <p>Lớp đầu vào nhận dữ liệu thô từ bên ngoài. Mỗi nơ-ron trong lớp này tương ứng với một đặc trưng (feature) trong tập dữ liệu. Lớp này không thực hiện tính toán mà chỉ truyền dữ liệu đến lớp tiếp theo.</p>
                        <h3 id="ann-hidden-layers" class="text-xl font-bold text-gray-600 mt-4 mb-2">2.2 Lớp ẩn (Hidden Layer)</h3>
                        <p>Lớp ẩn là "bộ não" của mạng, nơi các tính toán phức tạp diễn ra. Có thể có một hoặc nhiều lớp ẩn. Các nơ-ron trong lớp ẩn nhận dữ liệu từ lớp trước, thực hiện một phép tính và sau đó truyền kết quả đến lớp tiếp theo. Số lượng lớp ẩn và nơ-ron trong mỗi lớp quyết định khả năng học các mối quan hệ phức tạp của mô hình.</p>
                        <h3 id="ann-output-layer" class="text-xl font-bold text-gray-600 mt-4 mb-2">2.3 Lớp đầu ra (Output Layer)</h3>
                        <p>Lớp đầu ra là lớp cuối cùng, nơi mô hình đưa ra dự đoán hoặc kết quả. Số lượng nơ-ron trong lớp này phụ thuộc vào bài toán: một nơ-ron cho bài toán hồi quy, nhiều nơ-ron cho bài toán phân loại đa lớp.</p>
                        

                        <h2 id="ann-how-it-works" class="text-2xl font-bold text-gray-700 mt-8 mb-4">3. Quy trình huấn luyện</h2>
                        <p>Mô hình ANN hoạt động theo hai giai đoạn chính: truyền xuôi (feed-forward) và lan truyền ngược (backpropagation).</p>
                        <p>Trong giai đoạn <strong>truyền xuôi</strong>, dữ liệu đi qua mạng từ lớp đầu vào đến lớp đầu ra để tạo ra dự đoán. Sau đó, mô hình so sánh kết quả dự đoán với giá trị thực tế để tính toán sai số bằng một hàm mất mát (loss function), ví dụ như hàm <strong>Sai số bình phương trung bình (MSE)</strong>.</p>
                        <p>Giai đoạn <strong>lan truyền ngược</strong> (backpropagation) là trái tim của quá trình học. Mô hình sử dụng một thuật toán tối ưu hóa như <strong>Gradient Descent</strong> để tính toán gradient của hàm mất mát đối với mỗi trọng số và độ lệch. Dựa vào gradient này, các trọng số được điều chỉnh một cách có hệ thống để giảm thiểu sai số, giúp mô hình đưa ra dự đoán chính xác hơn trong lần tiếp theo.</p>

                        <h2 id="ann-applications" class="text-2xl font-bold text-gray-700 mt-8 mb-4">4. Ứng dụng phổ biến</h2>
                        <p>ANN được ứng dụng rộng rãi trong nhiều lĩnh vực:</p>
                        <ul class="list-disc pl-5 space-y-2">
                            <li><strong>Phân loại:</strong> Nhận dạng chữ viết tay, phân loại email spam.</li>
                            <li><strong>Dự đoán:</sup> Dự báo giá cổ phiếu, dự báo thời tiết.</li>
                            <li><strong>Nhận dạng:</strong> Nhận dạng giọng nói, nhận dạng khuôn mặt.</li>
                            <li><strong>Hồi quy:</strong> Dự đoán giá nhà, dự đoán điểm số.</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <!-- LSTM Document Page -->
            <section id="lstm-doc" class="mt-8 doc-section">
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                    <aside class="lg:col-span-1 bg-gray-50 p-6 rounded-lg shadow-md border border-gray-200">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Mục lục</h3>
                        <nav class="space-y-2">
                            <a href="#lstm-intro" class="block text-gray-700 hover:text-blue-600">1. Giới thiệu về LSTM</a>
                            <a href="#lstm-problem" class="block text-gray-700 hover:text-blue-600">2. Vấn đề của RNN</a>
                            <a href="#lstm-structure" class="block text-gray-700 hover:text-blue-600">3. Cấu trúc chi tiết của một Ô nhớ LSTM</a>
                            <a href="#lstm-gates" class="block text-gray-700 hover:text-blue-600 ml-4">3.1 Cổng Quên</a>
                            <a href="#lstm-input-gate" class="block text-gray-700 hover:text-blue-600 ml-4">3.2 Cổng Đầu vào</a>
                            <a href="#lstm-output-gate" class="block text-gray-700 hover:text-blue-600 ml-4">3.3 Cổng Đầu ra</a>
                            <a href="#lstm-applications" class="block text-gray-700 hover:text-blue-600">4. Ứng dụng của LSTM</a>
                        </nav>
                    </aside>
                    <div class="lg:col-span-3 prose max-w-none text-gray-800">
                        <h1 class="text-3xl font-bold text-gray-800 mb-6">Mô hình Bộ nhớ dài-ngắn hạn (LSTM)</h1>
                        <p>Bộ nhớ dài-ngắn hạn (Long Short-Term Memory - LSTM) là một loại mạng nơ-ron hồi quy (Recurrent Neural Network - RNN) đặc biệt, được thiết kế để giải quyết vấn đề bộ nhớ ngắn hạn của RNN truyền thống. LSTM có khả năng học và ghi nhớ các phụ thuộc dài hạn, khiến nó trở thành một mô hình lý tưởng cho dữ liệu chuỗi thời gian.</p>
                        
                        <h2 id="lstm-intro" class="text-2xl font-bold text-gray-700 mt-8 mb-4">1. Giới thiệu về LSTM</h2>
                        <p>Trong khi các mạng nơ-ron thông thường gặp khó khăn với dữ liệu tuần tự, LSTM lại nổi bật nhờ kiến trúc phức tạp của nó. Mỗi đơn vị (cell) trong LSTM có khả năng lưu trữ thông tin qua các khoảng thời gian dài, giúp mô hình hiểu được ngữ cảnh và mối quan hệ giữa các dữ liệu xa nhau trong chuỗi.</p>

                        <h2 id="lstm-problem" class="text-2xl font-bold text-gray-700 mt-8 mb-4">2. Vấn đề của RNN</h2>
                        <p>Các mạng RNN truyền thống gặp phải vấn đề "vanishing gradient" (đạo hàm biến mất) và "exploding gradient" (đạo hàm bùng nổ) khi xử lý các chuỗi dữ liệu dài. Điều này khiến chúng khó học được các phụ thuộc dài hạn, ví dụ như ghi nhớ thông tin từ đầu một câu để hiểu được ngữ nghĩa ở cuối câu. LSTM giải quyết vấn đề này thông qua một cấu trúc phức tạp với các cổng, kiểm soát luồng thông tin một cách cẩn thận.</p>
                        
                        <h2 id="lstm-structure" class="text-2xl font-bold text-gray-700 mt-8 mb-4">3. Cấu trúc chi tiết của một Ô nhớ LSTM</h2>
                        <p>Mỗi đơn vị LSTM bao gồm một **state cell** (trạng thái ô nhớ) và ba **cổng** (gates) chính, giúp nó điều chỉnh luồng thông tin vào và ra khỏi state cell. State cell đóng vai trò là "đường cao tốc" lưu trữ thông tin, trong khi các cổng hoạt động như các "bộ lọc" thông minh.</p>
                        <h3 id="lstm-gates" class="text-xl font-bold text-gray-600 mt-4 mb-2">3.1 Cổng Quên (Forget Gate)</h3>
                        <p>Cổng này quyết định thông tin nào từ **state cell cũ** cần được "quên" đi. Nó nhận đầu vào hiện tại ($x_t$) và trạng thái ẩn cũ ($h_{t-1}$), sau đó sử dụng một hàm **Sigmoid** để tạo ra một số từ 0 đến 1. Giá trị 0 tương ứng với "quên hoàn toàn" và 1 tương ứng với "giữ lại hoàn toàn".
                        </p>
                        <h3 id="lstm-input-gate" class="text-xl font-bold text-gray-600 mt-4 mb-2">3.2 Cổng Đầu vào (Input Gate)</h3>
                        <p>Cổng này quyết định thông tin mới nào sẽ được lưu trữ vào state cell. Nó bao gồm hai phần: một cổng **Sigmoid** quyết định những giá trị nào cần được cập nhật, và một hàm **Tanh** tạo ra một vector các giá trị mới. Sau đó, hai giá trị này được kết hợp để thêm thông tin mới vào state cell.
                        </p>
                        <h3 id="lstm-output-gate" class="text-xl font-bold text-gray-600 mt-4 mb-2">3.3 Cổng Đầu ra (Output Gate)</h3>
                        <p>Cổng này xác định giá trị đầu ra của đơn vị LSTM. Nó sử dụng một hàm **Sigmoid** để quyết định phần nào của **state cell** sẽ được xuất ra, sau đó nhân nó với giá trị của state cell đã được lọc qua hàm **Tanh** để tạo ra trạng thái ẩn mới ($h_t$). Trạng thái ẩn này vừa là đầu ra của đơn vị hiện tại, vừa là đầu vào cho đơn vị tiếp theo.
                        </p>
                        

                        <h2 id="lstm-applications" class="text-2xl font-bold text-gray-700 mt-8 mb-4">4. Ứng dụng của LSTM</h2>
                        <p>Do khả năng xử lý dữ liệu tuần tự vượt trội, LSTM được sử dụng trong các bài toán như:</p>
                        <ul class="list-disc pl-5 space-y-2">
                            <li><strong>Dự báo chuỗi thời gian:</strong> Dự báo giá cổ phiếu, dự báo lưu lượng giao thông.</li>
                            <li><strong>Xử lý ngôn ngữ tự nhiên:</strong> Dịch máy, nhận dạng giọng nói, tạo văn bản.</li>
                            <li><strong>Phân tích video:</strong> Nhận dạng hành động trong video.</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <!-- RF Document Page -->
            <section id="rf-doc" class="mt-8 doc-section">
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                    <aside class="lg:col-span-1 bg-gray-50 p-6 rounded-lg shadow-md border border-gray-200">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Mục lục</h3>
                        <nav class="space-y-2">
                            <a href="#rf-intro" class="block text-gray-700 hover:text-blue-600">1. Giới thiệu về RF</a>
                            <a href="#rf-how-it-works" class="block text-gray-700 hover:text-blue-600">2. Chi tiết về cơ chế Bagging và Ngẫu nhiên hóa</a>
                            <a href="#rf-algorithm" class="block text-gray-700 hover:text-blue-600 ml-4">2.1 Thuật toán Bootstrap Aggregating</a>
                            <a href="#rf-feature-randomness" class="block text-gray-700 hover:text-blue-600 ml-4">2.2 Ngẫu nhiên hóa đặc trưng</a>
                            <a href="#rf-benefits" class="block text-gray-700 hover:text-blue-600">3. Ưu điểm nổi bật</a>
                            <a href="#rf-hyperparameters" class="block text-gray-700 hover:text-blue-600">4. Các tham số chính (Hyperparameters)</a>
                            <a href="#rf-applications" class="block text-gray-700 hover:text-blue-600">5. Ứng dụng phổ biến</a>
                        </nav>
                    </aside>
                    <div class="lg:col-span-3 prose max-w-none text-gray-800">
                        <h1 class="text-3xl font-bold text-gray-800 mb-6">Mô hình Rừng ngẫu nhiên (RF)</h1>
                        <p>Rừng ngẫu nhiên (Random Forest - RF) là một trong những thuật toán học máy giám sát phổ biến và hiệu quả nhất. Nó thuộc nhóm các thuật toán "ensemble" (tập hợp), hoạt động bằng cách xây dựng nhiều cây quyết định và kết hợp các dự đoán của chúng để đưa ra một dự đoán cuối cùng chính xác hơn.</p>
                        
                        <h2 id="rf-intro" class="text-2xl font-bold text-gray-700 mt-8 mb-4">1. Giới thiệu về RF</h2>
                        <p>Một cây quyết định đơn lẻ có thể dễ bị quá khớp (overfitting) với dữ liệu huấn luyện, dẫn đến kết quả kém trên dữ liệu mới. RF giải quyết vấn đề này bằng cách tạo ra một "rừng" gồm nhiều cây quyết định độc lập, sau đó lấy trung bình kết quả (đối với bài toán hồi quy) hoặc lấy phiếu bầu (đối với bài toán phân loại) từ tất cả các cây để có một kết quả ổn định và đáng tin cậy hơn. Nguyên tắc này dựa trên ý tưởng **"trí tuệ đám đông"**, nơi dự đoán tập thể của nhiều mô hình yếu sẽ tốt hơn dự đoán của một mô hình đơn lẻ.</p>
                        
                        <h2 id="rf-how-it-works" class="text-2xl font-bold text-gray-700 mt-8 mb-4">2. Chi tiết về cơ chế Bagging và Ngẫu nhiên hóa</h2>
                        <p>Thuật toán Rừng ngẫu nhiên sử dụng hai kỹ thuật chính để tạo ra sự đa dạng giữa các cây, giúp tăng cường hiệu quả tổng thể:</p>
                        <h3 id="rf-algorithm" class="text-xl font-bold text-gray-600 mt-4 mb-2">2.1 Thuật toán Bootstrap Aggregating (Bagging)</h3>
                        <p>Thay vì sử dụng toàn bộ tập dữ liệu, mỗi cây quyết định trong RF được xây dựng từ một tập dữ liệu con được lấy mẫu ngẫu nhiên **có thay thế** (bootstrap sample) từ tập dữ liệu gốc. Điều này đảm bảo mỗi cây học từ một tập dữ liệu hơi khác nhau, giúp giảm phương sai (variance) của mô hình và ngăn chặn tình trạng quá khớp.</p>
                        <h3 id="rf-feature-randomness" class="text-xl font-bold text-gray-600 mt-4 mb-2">2.2 Ngẫu nhiên hóa đặc trưng (Feature Randomness)</h3>
                        <p>Khi xây dựng mỗi cây, thay vì xem xét tất cả các đặc trưng để tìm điểm phân chia tốt nhất, RF chỉ xem xét một tập hợp con ngẫu nhiên của các đặc trưng. Điều này giúp ngăn chặn việc một đặc trưng mạnh chi phối toàn bộ các cây, tăng cường sự độc lập và đa dạng giữa các cây, từ đó làm cho mô hình tổng thể mạnh hơn và ít bị quá khớp hơn.</p>
                        
                        
                        <h2 id="rf-benefits" class="text-2xl font-bold text-gray-700 mt-8 mb-4">3. Ưu điểm nổi bật</h2>
                        <ul class="list-disc pl-5 space-y-2">
                            <li><strong>Độ chính xác cao:</strong> Thường mang lại kết quả rất tốt trên nhiều loại dữ liệu.</li>
                            <li><strong>Giảm quá khớp:</strong> Kiến trúc tập hợp giúp RF ít bị quá khớp hơn so với một cây quyết định đơn lẻ.</li>
                            <li><strong>Xử lý dữ liệu lớn:</strong> Có thể xử lý hiệu quả các tập dữ liệu có số lượng đặc trưng lớn.</li>
                            <li><strong>Độ quan trọng của đặc trưng:</strong> RF cung cấp một cách để ước lượng tầm quan trọng của các đặc trưng, giúp ích cho việc phân tích dữ liệu.</li>
                        </ul>
                        
                        <h2 id="rf-hyperparameters" class="text-2xl font-bold text-gray-700 mt-8 mb-4">4. Các tham số chính (Hyperparameters)</h2>
                        <p>Để tối ưu hóa hiệu suất của mô hình RF, ta cần tinh chỉnh một số tham số quan trọng:</p>
                        <ul class="list-disc pl-5 space-y-2">
                            <li><strong>n_estimators:</strong> Số lượng cây quyết định trong rừng. Số lượng cây càng lớn, mô hình càng chính xác và ổn định, nhưng thời gian tính toán cũng tăng lên.</li>
                            <li><strong>max_features:</strong> Số lượng đặc trưng tối đa được xem xét tại mỗi nút. Việc giới hạn số lượng đặc trưng giúp giảm sự tương quan giữa các cây.</li>
                            <li><strong>max_depth:</strong> Độ sâu tối đa của mỗi cây. Giới hạn độ sâu giúp kiểm soát quá trình quá khớp.</li>
                        </ul>

                        <h2 id="rf-applications" class="text-2xl font-bold text-gray-700 mt-8 mb-4">5. Ứng dụng phổ biến</h2>
                        <ul class="list-disc pl-5 space-y-2">
                            <li><strong>Ngân hàng:</strong> Phát hiện gian lận thẻ tín dụng.</li>
                            <li><strong>Y học:</strong> Dự đoán bệnh, phân tích dữ liệu gen.</li>
                            <li><strong>Thị trường chứng khoán:</strong> Dự đoán xu hướng giá cổ phiếu.</li>
                        </ul>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const loadingSpinner = document.getElementById('loading-spinner');
            const ttsLoadingSpinner = document.getElementById('tts-loading-spinner');
            const langOptions = document.querySelectorAll('.lang-option');
            const langDisplay = document.getElementById('lang-display');
            const newsTabs = document.querySelectorAll('#news-tab-ml, #news-tab-ai');
            const documentsTabs = document.querySelectorAll('#documents-tab-ml, #documents-tab-ai');
            const latestNewsContent = document.getElementById('latest-news-content');
            const newsLoadingSpinner = document.getElementById('news-loading-spinner');
            const documentsLoadingSpinner = document.getElementById('documents-loading-spinner');
            const documentsTable = document.getElementById('documents-table');
            const documentsTableBody = document.getElementById('documents-table-body');
            const imagePromptInput = document.getElementById('image-prompt');
            const generateImageBtn = document.getElementById('generate-image-btn');
            const generatedImage = document.getElementById('generated-image');
            const imagePlaceholderText = document.getElementById('image-placeholder-text');
            const mainContentContainer = document.getElementById('main-content-container');
            const docLinks = document.querySelectorAll('.doc-link');
            const navLinks = document.querySelectorAll('.nav-link');

            let currentLang = 'vi';
            
            const translations = {
                'vi': {
                    'headerTitle': 'MÔ HÌNH HỌC MÁY & TRÍ TUỆ NHÂN TẠO',
                    'navHome': 'TRANG CHỦ',
                    'navNews': 'TIN TỨC',
                    'navML': 'MÔ HÌNH HỌC MÁY',
                    'navAI': 'TRÍ TUỆ NHÂN TẠO',
                    'navDocs': 'KHO TÀI LIỆU',
                    'introGeneralTitle': 'Giới thiệu chung',
                    'introGeneralText': 'Trí tuệ nhân tạo (AI) và Học máy (ML) là hai lĩnh vực liên quan chặt chẽ, cùng nhau tạo nên những công nghệ đột phá, cho phép máy tính học hỏi và đưa ra quyết định mà không cần được lập trình rõ ràng. Chúng đang thay đổi cách chúng ta tương tác với thế giới, từ các trợ lý ảo đến hệ thống chẩn đoán y tế.',
                    'introMLTitle': 'Mô hình Học máy',
                    'introMLText': 'Học máy (ML) là một nhánh của AI, tập trung vào việc phát triển các thuật toán cho phép máy tính tự học từ dữ liệu. Thay vì lập trình từng bước, chúng ta "huấn luyện" các mô hình bằng một lượng lớn dữ liệu để chúng tự tìm ra các mẫu và quy luật.',
                    'introAITitle': 'Trí tuệ nhân tạo',
                    'introAIText': 'Trí tuệ nhân tạo (AI) là lĩnh vực rộng lớn hơn, nhằm mục đích tạo ra các hệ thống có khả năng mô phỏng trí thông minh của con người. Điều này bao gồm khả năng suy luận, giải quyết vấn đề, nhận thức, học hỏi và thậm chí là sáng tạo. AI là mục tiêu cuối cùng.',
                    'introRelationshipTitle': 'Mối liên quan',
                    'introRelationshipText': 'Học máy là một tập hợp con quan trọng của Trí tuệ nhân tạo. Nó là một trong những phương pháp chính để đạt được mục tiêu AI.',
                    'aiFull': 'Trí tuệ nhân tạo',
                    'mlFull': 'Học máy',
                    'latestNewsTitle': 'Tin tức mới nhất',
                    'documentsTitle': 'Tài liệu hữu ích',
                    'mlModels': 'Mô hình học máy',
                    'aiModels': 'Trí tuệ nhân tạo',
                    'docName': 'Tên tài liệu',
                    'docSummary': 'Tóm tắt',
                    'docTopic': 'Chủ đề',
                    'docSourceVI': 'Nguồn (VI)',
                    'docSourceEN': 'Source (EN)',
                    'imageGenTitle': 'Tạo hình ảnh với AI ✨',
                    'imageGenDesc': 'Nhập mô tả bằng tiếng Anh về một khái niệm hoặc ý tưởng, và AI sẽ tạo ra một hình ảnh cho bạn. Ví dụ: "a futuristic robot helping people in a city park".',
                    'imagePromptPlaceholder': 'Mô tả hình ảnh bạn muốn tạo...',
                    'generateImageBtn': 'Tạo hình ảnh ✨',
                    'imagePlaceholder': 'Hình ảnh được tạo sẽ xuất hiện tại đây.',
                    'readMore': 'Đọc thêm',
                    'noNews': 'Không có tin tức nào được tìm thấy.',
                    'errorLoadingNews': 'Xin lỗi, không thể tải tin tức. Vui lòng thử lại sau.',
                    'noData': 'Không có dữ liệu. Xin vui lòng thử lại.',
                    'errorLoadingData': 'Lỗi khi tải dữ liệu.',
                    'loading': 'Đang tải...',
                    'errorCreatingImage': 'Lỗi khi tạo hình ảnh. Vui lòng thử lại.',
                    'noImagePrompt': 'Vui lòng nhập mô tả để tạo hình ảnh.'
                },
                'en': {
                    'headerTitle': 'MACHINE LEARNING & ARTIFICIAL INTELLIGENCE',
                    'navHome': 'HOME',
                    'navNews': 'NEWS',
                    'navML': 'MACHINE LEARNING',
                    'navAI': 'ARTIFICIAL INTELLIGENCE',
                    'navDocs': 'DOCUMENT REPOSITORY',
                    'introGeneralTitle': 'General Introduction',
                    'introGeneralText': 'Artificial Intelligence (AI) and Machine Learning (ML) are two closely related fields that together create breakthrough technologies, allowing computers to learn and make decisions without being explicitly programmed. They are changing how we interact with the world, from virtual assistants to medical diagnostic systems.',
                    'introMLTitle': 'Machine Learning Models',
                    'introMLText': 'Machine Learning (ML) is a branch of AI that focuses on developing algorithms that allow computers to learn from data. Instead of programming each step, we "train" models with large amounts of data to let them find patterns and rules on their own.',
                    'introAITitle': 'Artificial Intelligence',
                    'introAIText': 'Artificial Intelligence (AI) is a broader field that aims to create systems capable of mimicking human intelligence. This includes the ability to reason, solve problems, perceive, learn, and even create. AI is the ultimate goal.',
                    'introRelationshipTitle': 'Relationship',
                    'introRelationshipText': 'Machine Learning is a crucial subset of Artificial Intelligence. It is one of the main methods to achieve the goal of AI.',
                    'aiFull': 'Artificial Intelligence',
                    'mlFull': 'Machine Learning',
                    'latestNewsTitle': 'Latest News',
                    'documentsTitle': 'Useful Documents',
                    'mlModels': 'Machine Learning Models',
                    'aiModels': 'Artificial Intelligence',
                    'docName': 'Document Name',
                    'docSummary': 'Summary',
                    'docTopic': 'Topic',
                    'docSourceVI': 'Source (VI)',
                    'docSourceEN': 'Source (EN)',
                    'imageGenTitle': 'Generate Images with AI ✨',
                    'imageGenDesc': 'Enter a description of a concept or idea, and AI will generate an image for you. Ví dụ: "a futuristic robot helping people in a city park".',
                    'imagePromptPlaceholder': 'Describe the image you want to create...',
                    'generateImageBtn': 'Generate Image ✨',
                    'imagePlaceholder': 'The generated image will appear here.',
                    'readMore': 'Read more',
                    'noNews': 'No news found.',
                    'errorLoadingNews': 'Sorry, could not load news. Please try again later.',
                    'noData': 'No data found. Please try again.',
                    'errorLoadingData': 'Error loading data.',
                    'loading': 'Loading...',
                    'errorCreatingImage': 'Error creating image. Please try again.',
                    'noImagePrompt': 'Please enter a description to generate an image.'
                }
            };
            
            const hardcodedDocuments = [
                {
                    name: {
                        vi: 'Ứng dụng mô hình học máy trong dự báo khí tượng thủy văn',
                        en: 'Application of Machine Learning Models in Hydro-Meteorological Forecasting'
                    },
                    summary: {
                        vi: 'Nghiên cứu về việc sử dụng các mô hình học máy để cải thiện độ chính xác của dự báo thời tiết và thủy văn, một lĩnh vực ứng dụng quan trọng của ML.',
                        en: 'A study on the use of machine learning models to improve the accuracy of weather and hydrological forecasts, a crucial application field for ML.'
                    },
                    topic: 'Mô hình học máy',
                    source_vi: 'https://imh.ac.vn/files/doc/TBDB_Khihau/TC%20so%2020/Bai%204.pdf',
                    source_en: 'https://imh.ac.vn/files/doc/TBDB_Khihau/TC%20so%2020/Bai%204_en.pdf'
                },
                {
                    name: {
                        vi: 'Nghiên cứu về Trí tuệ nhân tạo và Ứng dụng',
                        en: 'Research on Artificial Intelligence and Applications'
                    },
                    summary: {
                        vi: 'Một bài báo khoa học khám phá các khái niệm cơ bản và ứng dụng thực tế của trí tuệ nhân tạo trong các lĩnh vực khác nhau của đời sống và kỹ thuật.',
                        en: 'A scientific paper exploring the basic concepts and practical applications of artificial intelligence in various fields of life and engineering.'
                    },
                    topic: 'Trí tuệ nhân tạo',
                    source_vi: 'https://vawr.org.vn/Upload/BaibaoKH/ho-viet-hung-64-2021.pdf',
                    source_en: 'https://vawr.org.vn/Upload/BaibaoKH/ho-viet-hung-64-2021_en.pdf'
                }
            ];

            function showPage(pageId) {
                document.querySelectorAll('.doc-section').forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById(pageId).classList.add('active');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            function applyTranslations(lang) {
                document.querySelectorAll('[data-i18n]').forEach(element => {
                    const key = element.getAttribute('data-i18n');
                    if (translations[lang][key]) {
                        element.textContent = translations[lang][key];
                    }
                });
                document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                    const key = element.getAttribute('data-i18n-placeholder');
                    if (translations[lang][key]) {
                        element.placeholder = translations[lang][key];
                    }
                });
                langDisplay.textContent = lang.toUpperCase();
                populateDocumentsTable(documentsTableBody.dataset.currentCategory || 'Mô hình học máy');
            }

            function getPromptText(key) {
                const prompts = {
                    'vi': {
                        'news_ml': 'Liệt kê 5 tin tức hoặc nghiên cứu mới nhất về học máy. Xin hãy trả lời bằng tiếng Việt.',
                        'news_ai': 'Liệt kê 5 tin tức hoặc nghiên cứu mới nhất về trí tuệ nhân tạo. Xin hãy trả lời bằng tiếng Việt.',
                        'system': 'Bạn là một chuyên gia về AI và Học máy. Hãy cung cấp một bản tóm tắt ngắn gọn và chính xác về chủ đề sau bằng tiếng Việt. Dựa trên các nguồn quốc tế uy tín.'
                    },
                    'en': {
                        'news_ml': 'List 5 of the most recent news articles or studies about machine learning. Please respond in English.',
                        'news_ai': 'List 5 of the most recent news articles or studies about artificial intelligence. Please respond in English.',
                        'system': 'You are an expert AI and Machine Learning researcher. Provide a concise and accurate summary of the following topic in English. Base your response on reputable international sources.'
                    }
                };
                return prompts[currentLang][key];
            }

            function populateDocumentsTable(category) {
                documentsTableBody.innerHTML = '';
                documentsTableBody.dataset.currentCategory = category;
                const filteredDocs = hardcodedDocuments.filter(doc => (currentLang === 'vi' && doc.topic === category) || (currentLang === 'en' && doc.topic === translations['en'][category.replace(/ /g, '')]));

                if (filteredDocs.length === 0) {
                    documentsTableBody.innerHTML = `<tr><td colspan="5" class="py-4 text-center text-gray-500">${translations[currentLang].noData}</td></tr>`;
                    return;
                }

                filteredDocs.forEach(doc => {
                    const row = document.createElement('tr');
                    row.className = 'hover:bg-gray-50';
                    row.innerHTML = `
                        <td class="py-3 px-6">${doc.name[currentLang]}</td>
                        <td class="py-3 px-6 hidden sm:table-cell">${doc.summary[currentLang]}</td>
                        <td class="py-3 px-6">${doc.topic}</td>
                        <td class="py-3 px-6">
                            <a href="${doc.source_vi}" target="_blank" class="text-blue-600 hover:underline" ${!doc.source_vi ? 'style="pointer-events: none; opacity: 0.5;"' : ''}>${translations[currentLang].readMore}</a>
                        </td>
                        <td class="py-3 px-6">
                            <a href="${doc.source_en}" target="_blank" class="text-blue-600 hover:underline" ${!doc.source_en ? 'style="pointer-events: none; opacity: 0.5;"' : ''}>${translations[currentLang].readMore}</a>
                        </td>
                    `;
                    documentsTableBody.appendChild(row);
                });
            }

            async function fetchLatestNews(category) {
                newsLoadingSpinner.classList.remove('hidden');
                latestNewsContent.innerHTML = '';
                const prompt = category === (currentLang === 'vi' ? 'Mô hình học máy' : 'Machine Learning Models') ? getPromptText('news_ml') : getPromptText('news_ai');
                const systemPrompt = getPromptText('system');
                
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                const payload = {
                    contents: [{ parts: [{ text: prompt }] }],
                    tools: [{ "google_search": {} }],
                    systemInstruction: { parts: [{ text: systemPrompt }] },
                };

                let response;
                let retries = 0;
                const maxRetries = 3;
                const baseDelay = 1000;

                while (retries < maxRetries) {
                    try {
                        response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (response.status === 429) {
                            retries++;
                            const delay = baseDelay * Math.pow(2, retries);
                            await new Promise(resolve => setTimeout(resolve, delay));
                            continue;
                        }

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        break;
                    } catch (e) {
                        retries++;
                        if (retries >= maxRetries) {
                            console.error('Error fetching data after multiple retries:', e);
                            latestNewsContent.innerHTML = `<div class="col-span-1 md:col-span-2 text-center text-gray-500 py-4">${translations[currentLang].errorLoadingNews}</div>`;
                            newsLoadingSpinner.classList.add('hidden');
                            return;
                        }
                        const delay = baseDelay * Math.pow(2, retries);
                        await new Promise(resolve => setTimeout(resolve, delay));
                    }
                }

                if (response && response.ok) {
                    const result = await response.json();
                    const candidate = result.candidates?.[0];

                    if (candidate && candidate.content?.parts?.[0]?.text) {
                        const text = candidate.content.parts[0].text;
                        const sources = candidate.groundingMetadata?.groundingAttributions || [];
                        const articles = text.split('\n\n').filter(p => p.trim() !== '');

                        articles.forEach((article, index) => {
                            const [title, ...summaryParts] = article.split('\n');
                            const summary = summaryParts.join(' ').replace(/^- /, '').trim();
                            const sourceUri = sources[index] ? sources[index].web?.uri : '#';

                            const card = document.createElement('div');
                            card.className = 'bg-white rounded-xl shadow-md p-4 transform transition-all duration-300 card-hover';
                            card.innerHTML = `
                                <h3 class="text-sm font-semibold text-gray-800 mb-1">${title.replace(/^\d+\.\s*/, '')}</h3>
                                <p class="text-xs text-gray-600 mb-2">${summary}</p>
                                <a href="${sourceUri}" target="_blank" class="text-blue-600 hover:underline text-xs">${translations[currentLang].readMore}</a>
                            `;
                            latestNewsContent.appendChild(card);
                        });
                        
                        if (articles.length === 0) {
                            latestNewsContent.innerHTML = `<div class="col-span-1 md:col-span-2 text-center text-gray-500 py-4">${translations[currentLang].noNews}</div>`;
                        }
                    } else {
                        latestNewsContent.innerHTML = `<div class="col-span-1 md:col-span-2 text-center text-gray-500 py-4">${translations[currentLang].noData}</div>`;
                    }
                } else {
                    latestNewsContent.innerHTML = `<div class="col-span-1 md:col-span-2 text-center text-gray-500 py-4">${translations[currentLang].errorLoadingData}</div>`;
                }
                newsLoadingSpinner.classList.add('hidden');
            }

            // Event Listeners
            langOptions.forEach(option => {
                option.addEventListener('click', (e) => {
                    const newLang = e.target.getAttribute('data-lang');
                    if (newLang !== currentLang) {
                        currentLang = newLang;
                        applyTranslations(currentLang);
                        // The user will navigate to the correct page via doc-links
                    }
                });
            });

            newsTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    newsTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    const category = tab.textContent.trim();
                    fetchLatestNews(category);
                });
            });

            documentsTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    documentsTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    const category = tab.textContent.trim();
                    documentsTable.classList.add('hidden');
                    documentsLoadingSpinner.classList.remove('hidden');
                    setTimeout(() => {
                        documentsTable.classList.remove('hidden');
                        documentsLoadingSpinner.classList.add('hidden');
                        populateDocumentsTable(category);
                    }, 500);
                });
            });
            
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    const targetId = link.getAttribute('href').substring(1);
                    if (targetId) {
                        showPage(targetId);
                    }
                });
            });
            
            docLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('data-doc-target');
                    if (targetId) {
                        showPage(targetId);
                    }
                });
            });
            
            generateImageBtn.addEventListener('click', async () => {
                const prompt = imagePromptInput.value.trim();
                if (!prompt) {
                    imagePlaceholderText.textContent = translations[currentLang].noImagePrompt;
                    generatedImage.classList.add('hidden');
                    return;
                }

                imagePlaceholderText.textContent = translations[currentLang].loading;
                generatedImage.classList.add('hidden');
                generateImageBtn.disabled = true;

                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/imagen-3.0-generate-002:predict?key=${apiKey}`;
                const payload = { instances: { prompt: prompt }, parameters: { "sampleCount": 1} };

                let response;
                let retries = 0;
                const maxRetries = 3;
                const baseDelay = 1000;

                while (retries < maxRetries) {
                    try {
                        response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (response.status === 429) {
                            retries++;
                            const delay = baseDelay * Math.pow(2, retries);
                            await new Promise(resolve => setTimeout(resolve, delay));
                            continue;
                        }

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        break;
                    } catch (e) {
                        retries++;
                        if (retries >= maxRetries) {
                            console.error('Error fetching image data after multiple retries:', e);
                            imagePlaceholderText.textContent = translations[currentLang].errorCreatingImage;
                            generateImageBtn.disabled = false;
                            return;
                        }
                        const delay = baseDelay * Math.pow(2, retries);
                        await new Promise(resolve => setTimeout(resolve, delay));
                    }
                }

                if (response && response.ok) {
                    const result = await response.json();
                    if (result.predictions && result.predictions.length > 0 && result.predictions[0].bytesBase64Encoded) {
                        const base64Data = result.predictions[0].bytesBase64Encoded;
                        generatedImage.src = `data:image/png;base64,${base64Data}`;
                        generatedImage.classList.remove('hidden');
                        imagePlaceholderText.textContent = "";
                    } else {
                        imagePlaceholderText.textContent = translations[currentLang].noData;
                        generatedImage.classList.add('hidden');
                    }
                } else {
                    imagePlaceholderText.textContent = translations[currentLang].errorLoadingData;
                }
                generateImageBtn.disabled = false;
            });

            // Initial calls on page load
            applyTranslations(currentLang);
            fetchLatestNews(newsTabs[0].textContent.trim());
            populateDocumentsTable(documentsTabs[0].textContent.trim());
            documentsTable.classList.remove('hidden');
        });
    </script>
</body>
</html>
